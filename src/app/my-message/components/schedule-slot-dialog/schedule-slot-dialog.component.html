<div class="container-fluid position-relative setwidth">
  <form [formGroup]="scheduleForm">
    <div class="mb-2">
      <button type="button" class="btn-close close-button" (click)="closeDialog(true)" aria-label="Close"></button>
    </div>
    <div class="mt-3">
      <h6 class="mt-7"><strong>Choose Slots</strong><span style="color: red">*</span></h6>
      <mat-form-field appearance="outline" style="width: 100%" class="w-100">
        <mat-select formControlName="availableSlots" placeholder="Select a Slot" (selectionChange)="onSlotSelected($event)">
          <ngx-mat-select-search
            [formControl]="availableSlotsSearchControl"
            placeholderLabel="Search Available Slots"
            noEntriesFoundLabel="Data not found">
          </ngx-mat-select-search>
          <mat-option *ngFor="let slot of availableSlots; let i = index" [value]="slot.slots_id">
            {{ slot.start_date_time }}
            <span *ngIf="slot.capacity_appointment_ids?.capacity !== null">
              ({{ slot.capacity_appointment_ids.capacity === 0 ? 'Slot Full' : 'Capacity Left: ' + slot.capacity_appointment_ids.capacity }})
            </span>
          </mat-option>
        </mat-select>
      </mat-form-field>
    </div>
    <div class="d-flex justify-content-center mt-1">
      <button type="button" class="btn btn-success" (click)="airmanBookSlot()">Submit</button>
    </div>
  </form>
</div>
